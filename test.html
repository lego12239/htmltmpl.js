<html>
<head>
  <title>htmltmpl test</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <script type="text/javascript" src="htmltmpl.js"></script>
  <script type="text/javascript">
    var tmpl;  // make tmpl a global var for debug purposes
    var span_ok, span_fail, res_cntr_el;
    var tests = [ { id: "unit0",
                    id_res: "unit0_res",
                    as_str: 1,
                    title: "Test template as string",
                    prms: {},
                    data: { var1: 1,
                            var2: "test",
                            var3: 234,
                            var_long_name4: "asdf123" } },
                  { id: "unit1",
                    id_res: "unit1_res",
                    title: "Test TMPL_VAR",
                    prms: {},
                    data: { var1: 1,
                            var2: "test",
                            var3: 234,
                            var_long_name4: "asdf123" } },
                  { id: "unit2",
                    id_res: "unit2_res",
                    title: "Test TMPL_VAR with a no var data",
                    prms: { },
                    data: { var1: 123 } },
                  { id: "unit3",
                    id_res: "unit3_res",
                    title: "Test TMPL_VAR with DEFAULT attribute",
                    prms: { },
                    data: { var1: 123,
                            var3: "test" } },
                  { id: "unit4",
                    id_res: "unit4_res",
                    title: "Test TMPL_LOOP",
                    prms: {},
                    data: { var1: 1,
                            var2: "test",
                            loop1: [ { var1: 123,
                                       var2: "asdf",
                                       var3: "qwer" },
                                     { var1: 456,
                                       var2: "uikj",
                                       var3: "zxcv" },
                                     { var1: "lk jfd",
                                       var2: 789,
                                       var3: "pooiu " } ],
                            var_long_name: "ffff" } },
                  { id: "unit5",
                    id_res: "unit5_res",
                    title: "Test TMPL_LOOP with an empty loop data",
                    prms: { },
                    data: { loop1: [ ] } },
                  { id: "unit6",
                    id_res: "unit6_res",
                    title: "Test TMPL_LOOP with global_vars option",
                    prms: { global_vars: 1 },
                    data: { var1: 1,
                            var2: "test",
                            var3: "glb",
                            loop1: [ { var1: 123,
                                       var2: "asdf" },
                                     { var1: 456,
                                       var2: "uikj" },
                                     { var1: "lk jfd",
                                       var2: 789 } ],
                            var_long_name: "ffff" } },
                  { id: "unit7",
                    id_res: "unit7_res",
                    title: "Test TMPL_LOOP without needed var",
                    prms: {},
                    data: { var1: 1,
                            var2: "test",
                            loop1: [ { var1: 123,
                                       var3: "qwer" },
                                     { var1: 456,
                                       var3: "zxcv" },
                                     { var1: "lk jfd",
                                       var3: "pooiu " } ],
                            var_long_name: "ffff" } },
                  { id: "unit8",
                    id_res: "unit8_res",
                    title: "Test inner TMPL_LOOP",
                    prms: {},
                    data: { loop1: [ { var1: 123,
                                       var2: "qwer",
                                       var3: "lkjk",
                                       loop2: [ { var1: "asdf",
                                                  var2: "jhgf",
                                                  var3: "jhhhf" },
                                                { var1: "asdf1",
                                                  var2: "jjjj2",
                                                  var3: "aaaa2" },
                                                { var1: "dfdf3",
                                                  var2: "dfdf4",
                                                  var3: "dfdf5" } ] },
                                     { var1: 456,
                                       var2: "kjkj",
                                       var3: "aaaa12",
                                       loop2: [ { var1: "asdf1",
                                                  var2: "jhgf1",
                                                  var3: "jhhhf1" },
                                                { var1: "asdf2",
                                                  var2: "jjjj3",
                                                  var3: "aaaa3" },
                                                { var1: "dfdf7",
                                                  var2: "dfdf8",
                                                  var3: "dfdf9" } ] } ] } },
                  { id: "unit9",
                    id_res: "unit9_res",
                    title: "Test inner TMPL_LOOP with global_vars option",
                    prms: { global_vars: 1 },
                    data: { loop2: [ { var1: "asdf",
                                       var2: "jhgf",
                                       var3: "jhhhf" },
                                     { var1: "asdf1",
                                       var2: "jjjj2",
                                       var3: "aaaa2" },
                                     { var1: "dfdf3",
                                       var2: "dfdf4",
                                       var3: "dfdf5" } ],
                            loop1: [ { var1: 123,
                                       var2: "qwer",
                                       var3: "lkjk" },
                                     { var1: 456,
                                       var2: "kjkj",
                                       var3: "aaaa12" } ] } },
                  { id: "unit10",
                    id_res: "unit10_res",
                    title: "Test TMPL_LOOP (3 pass) with loop_context_vars option",
                    prms: { loop_context_vars: 1 },
                    data: { loop1: [ { var1: 123,
                                       var3: "qwer" },
                                     { var1: 456,
                                       var3: "zxcv" },
                                     { var1: "lk jfd",
                                       var3: "pooiu " } ] } },
                  { id: "unit11",
                    id_res: "unit11_res",
                    title: "Test TMPL_LOOP (2 pass) with loop_context_vars option",
                    prms: { loop_context_vars: 1 },
                    data: { loop1: [ { var1: 123,
                                       var3: "qwer" },
                                     { var1: "lk jfd",
                                       var3: "pooiu " } ] } },
                  { id: "unit12",
                    id_res: "unit12_res",
                    title: "Test TMPL_LOOP (1 pass) with loop_context_vars option",
                    prms: { loop_context_vars: 1 },
                    data: { loop1: [ { var1: 123,
                                       var3: "pooiu " } ] } },
                  { id: "unit13",
                    id_res: "unit13_res",
                    title: "Test TMPL_IF",
                    prms: {},
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit14",
                    id_res: "unit14_res",
                    title: "Test TMPL_IF with a no var data",
                    prms: { },
                    data: { var1: 123,
                            var3: "test" } },
                  { id: "unit15",
                    id_res: "unit15_res",
                    title: "Test TMPL_IF with TMPL_ELSE",
                    prms: {},
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit16",
                    id_res: "unit16_res",
                    title: "Test TMPL_UNLESS",
                    prms: {},
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit17",
                    id_res: "unit17_res",
                    title: "Test TMPL_UNLESS with a no var data",
                    prms: { },
                    data: { var1: 123,
                            var3: "test" } },
                  { id: "unit18",
                    id_res: "unit18_res",
                    title: "Test TMPL_UNLESS with TMPL_ELSE",
                    prms: {},
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit19",
                    id_res: "unit19_res",
                    title: "Test tmpl_is_commented option",
                    prms: { tmpl_is_commented: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit20",
                    id_res: "unit20_res",
                    title: "Test tmpl_is_commented option",
                    prms: { tmpl_is_commented: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit21",
                    id_res: "unit21_res",
                    title: "Test ph_case_sensitive option",
                    prms: { ph_case_sensitive: 0 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit22",
                    id_res: "unit22_res",
                    title: "Test the commented variant of the tags",
                    prms: { },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit23",
                    id_res: "unit23_res",
                    title: "Test the err_on_no_data option & TMPL_VAR",
                    is_err: 1,
                    err_msg: "Cann't find var 'var3'.",
                    prms: { err_on_no_data: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit24",
                    id_res: "unit24_res",
                    title: "Test the err_on_no_data option & TMPL_LOOP",
                    is_err: 1,
                    err_msg: "Cann't find loop 'loop2'.",
                    prms: { err_on_no_data: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit25",
                    id_res: "unit25_res",
                    title: "Test the err_on_no_data option & TMPL_IF",
                    is_err: 1,
                    err_msg: "Cann't find bool var 'var3'.",
                    prms: { err_on_no_data: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit26",
                    id_res: "unit26_res",
                    title: "Test the ph_case_sensitive option",
                    prms: { ph_case_sensitive: 0 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit27",
                    id_res: "unit27_res",
                    title: "Test more than one space inside TMPL_VAR construction",
                    prms: {},
                    data: { var1: "tt",
                            var2: "qq" } },
                  { id: "unit28",
                    id_res: "unit28_res",
                    title: "Test more than one space inside TMPL_LOOP construction",
                    prms: {},
                    data: { loop1: [ { var1: 123 } ] } },
                  { id: "unit29",
                    id_res: "unit29_res",
                    title: "Test more than one space inside TMPL_IF construction",
                    prms: {},
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit30",
                    id_res: "unit30_res",
                    title: "Test more than one space inside TMPL_UNLESS construction",
                    prms: {},
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit31",
                    id_res: "unit31_res",
                    title: "Test quoted arguments in TMPL_VAR",
                    prms: {},
                    data: { var1: "tt",
                            var2: "qq" } } ];
    function report_ok(test)
    {
        var el, span;


        el = document.createElement("div");
        span = document.createElement("span");
        span.innerHTML = "test '" + test.id + "' (" + test.title + "): ";
        el.appendChild(span);
        el.appendChild(span_ok.cloneNode(true));
        res_cntr_el.appendChild(el);
    }

    function report_fail(test)
    {
        var el, span;


        el = document.createElement("div");
        span = document.createElement("span");
        span.innerHTML = "test '" + test.id + "' (" + test.title + "): ";
        el.appendChild(span);
        el.appendChild(span_fail.cloneNode(true));
        res_cntr_el.appendChild(el);
    }

    function do_tests()
    {
        var i;
        var ret;


        span_ok = document.getElementById("results_ok");
        span_fail = document.getElementById("results_fail");
        res_cntr_el = document.getElementById("results");

        // set counter initial value
        document.getElementById("counter").innerHTML = "0/" + tests.length;

        for(i = 0; i < tests.length; i++) {
            if ( tests[i].as_str )
                tmpl = new htmltmpl(document.getElementById(tests[i].id).innerHTML,
                                    tests[i].prms);
            else
                tmpl = new htmltmpl(document.getElementById(tests[i].id), tests[i].prms);
            ret = tmpl.apply(tests[i].data);
            if ( tests[i].is_err ) {
                if (( ret == undefined ) && ( tests[i].err_msg == tmpl.err_msg ))
                    report_ok(tests[i]);
                else
                    report_fail(tests[i]);
            } else {
                if ( document.getElementById(tests[i].id_res).innerHTML == tmpl.out_str )
	            report_ok(tests[i]);
                else
                    report_fail(tests[i]);
            }

            console.log("unit" + i + ": " + JSON.stringify(tmpl.tmpl.data));

            // set counter
            document.getElementById("counter").innerHTML = (i + 1) + "/" + tests.length;
        }
    }
  </script>
</head>
<body onload="do_tests()">
  <div style="margin: 1em">
    run tests: <span id="counter">0/0</span>
  </div>

  <div id="results">
  </div>

  <div style="display: none">
  <span id="results_fail" style="color: red; font-weight: bold">fail</span>
  <span id="results_ok" style="color: green; font-weight: bold">ok</span>

  <!-- unit 0 -->
  <div id="unit0">
    <%TMPL_VAR NAME=var1%>
    another
    <%TMPL_VAR NAME=var2%>
    text
    <%TMPL_VAR NAME=var3%>
    here
    <%TMPL_VAR NAME=var_long_name4%>
  </div>
  <div id="unit0_res">
    1
    another
    test
    text
    234
    here
    asdf123
  </div>

  <!-- unit 1 -->
  <div id="unit1">
    <%TMPL_VAR NAME=var1%>
    <%TMPL_VAR NAME=var2%>
    <%TMPL_VAR NAME=var3%>
    <%TMPL_VAR NAME=var_long_name4%>
  </div>
  <div id="unit1_res">
    1
    test
    234
    asdf123
  </div>

  <!-- unit 2 -->
  <div id="unit2">
    <%TMPL_VAR NAME=var1%>
    <%TMPL_VAR NAME=var2%>
  </div>
  <div id="unit2_res">
    123
    
  </div>

  <!-- unit 3 -->
  <div id="unit3">
    <%TMPL_VAR DEFAULT=test1 NAME=var1%>
    <%TMPL_VAR DEFAULT=test1 NAME=var2%>
  </div>
  <div id="unit3_res">
    123
    test1
  </div>

  <!-- unit 4 -->
  <div id="unit4">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var2%>
      <%TMPL_VAR NAME=var3%>
    <%/TMPL_LOOP%>
    <%TMPL_VAR NAME=var1%>
    <%TMPL_VAR NAME=var2%>
    <%TMPL_VAR NAME=var_long_name%>
  </div>
  <div id="unit4_res">
    
      123
      asdf
      qwer
    
      456
      uikj
      zxcv
    
      lk jfd
      789
      pooiu 
    
    1
    test
    ffff
  </div>

  <!-- unit 5 -->
  <div id="unit5">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_IF NAME=var3%>
        <%TMPL_VAR NAME=var1%>
      <%/TMPL_IF%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit5_res">
    
  </div>

  <!-- unit 6 -->
  <div id="unit6">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var2%>
      <%TMPL_VAR NAME=var3%>
    <%/TMPL_LOOP%>
    <%TMPL_VAR NAME=var1%>
    <%TMPL_VAR NAME=var2%>
    <%TMPL_VAR NAME=var_long_name%>
  </div>
  <div id="unit6_res">
    
      123
      asdf
      glb
    
      456
      uikj
      glb
    
      lk jfd
      789
      glb
    
    1
    test
    ffff
  </div>

  <!-- unit 7 -->
  <div id="unit7">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var2%>
      <%TMPL_VAR NAME=var3%>
    <%/TMPL_LOOP%>
    <%TMPL_VAR NAME=var1%>
    <%TMPL_VAR NAME=var2%>
    <%TMPL_VAR NAME=var_long_name%>
  </div>
  <div id="unit7_res">
    
      123
      
      qwer
    
      456
      
      zxcv
    
      lk jfd
      
      pooiu 
    
    1
    test
    ffff
  </div>

  <!-- unit 8 -->
  <div id="unit8">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var2%>
      <%TMPL_VAR NAME=var3%>
      <%TMPL_LOOP NAME=loop2%>
        <%TMPL_VAR NAME=var1%>
        <%TMPL_VAR NAME=var2%>
        <%TMPL_VAR NAME=var3%>
      <%/TMPL_LOOP%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit8_res">
    
      123
      qwer
      lkjk
      
        asdf
        jhgf
        jhhhf
      
        asdf1
        jjjj2
        aaaa2
      
        dfdf3
        dfdf4
        dfdf5
      
    
      456
      kjkj
      aaaa12
      
        asdf1
        jhgf1
        jhhhf1
      
        asdf2
        jjjj3
        aaaa3
      
        dfdf7
        dfdf8
        dfdf9
      
    
  </div>    

  <!-- unit 9 -->
  <div id="unit9">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var2%>
      <%TMPL_VAR NAME=var3%>
      <%TMPL_LOOP NAME=loop2%>
        <%TMPL_VAR NAME=var1%>
        <%TMPL_VAR NAME=var2%>
        <%TMPL_VAR NAME=var3%>
      <%/TMPL_LOOP%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit9_res">
    
      123
      qwer
      lkjk
      
        asdf
        jhgf
        jhhhf
      
        asdf1
        jjjj2
        aaaa2
      
        dfdf3
        dfdf4
        dfdf5
      
    
      456
      kjkj
      aaaa12
      
        asdf
        jhgf
        jhhhf
      
        asdf1
        jjjj2
        aaaa2
      
        dfdf3
        dfdf4
        dfdf5
      
    
  </div>    

  <!-- unit 10 -->
  <div id="unit10">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=__first__%>
      <%TMPL_VAR NAME=__last__%>
      <%TMPL_VAR NAME=__inner__%>
      <%TMPL_VAR NAME=__outer__%>
      <%TMPL_VAR NAME=__odd__%>
      <%TMPL_VAR NAME=__even__%>
      <%TMPL_VAR NAME=__counter__%>
      <%TMPL_VAR NAME=__index__%>

      <%TMPL_VAR NAME=var1%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit10_res">
    
      1
      0
      0
      1
      1
      0
      1
      0

      123
    
      0
      0
      1
      0
      0
      1
      2
      1

      456
    
      0
      1
      0
      1
      1
      0
      3
      2

      lk jfd
    
  </div>

  <!-- unit 11 -->
  <div id="unit11">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=__first__%>
      <%TMPL_VAR NAME=__last__%>
      <%TMPL_VAR NAME=__inner__%>
      <%TMPL_VAR NAME=__outer__%>
      <%TMPL_VAR NAME=__odd__%>
      <%TMPL_VAR NAME=__even__%>
      <%TMPL_VAR NAME=__counter__%>
      <%TMPL_VAR NAME=__index__%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit11_res">
    
      1
      0
      0
      1
      1
      0
      1
      0
    
      0
      1
      0
      1
      0
      1
      2
      1
    
  </div>

  <!-- unit 12 -->
  <div id="unit12">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=__first__%>
      <%TMPL_VAR NAME=__last__%>
      <%TMPL_VAR NAME=__inner__%>
      <%TMPL_VAR NAME=__outer__%>
      <%TMPL_VAR NAME=__odd__%>
      <%TMPL_VAR NAME=__even__%>
      <%TMPL_VAR NAME=__counter__%>
      <%TMPL_VAR NAME=__index__%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit12_res">
    
      1
      1
      0
      1
      1
      0
      1
      0
    
  </div>

  <!-- unit 13 -->
  <div id="unit13">
    <%TMPL_IF NAME=show_var1%>
      <%TMPL_VAR NAME=var1%>
    <%/TMPL_IF%>
    <%TMPL_IF NAME=show_var2%>
      <%TMPL_VAR NAME=var2%>
    <%/TMPL_IF%>
  </div>
  <div id="unit13_res">
    
      123
    
    
  </div>

  <!-- unit 14 -->
  <div id="unit14">
    <%TMPL_IF NAME=var2%>
      <%TMPL_VAR NAME=var1%>
    <%TMPL_ELSE%>
      <%TMPL_VAR NAME=var3%>
    <%/TMPL_IF%>
  </div>
  <div id="unit14_res">
    
      test
    
  </div>

  <!-- unit 15 -->
  <div id="unit15">
    <%TMPL_IF NAME=show_var1%>
      <%TMPL_VAR NAME=var1%>
    <%TMPL_ELSE%>
      without var1
    <%/TMPL_IF%>
    <%TMPL_IF NAME=show_var2%>
      <%TMPL_VAR NAME=var2%>
    <%TMPL_ELSE%>
      without var2
    <%/TMPL_IF%>
  </div>
  <div id="unit15_res">
    
      123
    
    
      without var2
    
  </div>

  <!-- unit 16 -->
  <div id="unit16">
    <%TMPL_UNLESS NAME=show_var1%>
      <%TMPL_VAR NAME=var1%>
    <%/TMPL_UNLESS%>
    <%TMPL_UNLESS NAME=show_var2%>
      <%TMPL_VAR NAME=var2%>
    <%/TMPL_UNLESS%>
  </div>
  <div id="unit16_res">
    
    
      test
    
  </div>

  <!-- unit 17 -->
  <div id="unit17">
    <%TMPL_UNLESS NAME=var2%>
      <%TMPL_VAR NAME=var1%>
    <%TMPL_ELSE%>
      <%TMPL_VAR NAME=var3%>
    <%/TMPL_UNLESS%>
  </div>
  <div id="unit17_res">
    
      123
    
  </div>

  <!-- unit 18 -->
  <div id="unit18">
    <%TMPL_UNLESS NAME=show_var1%>
      <%TMPL_VAR NAME=var1%>
    <%TMPL_ELSE%>
      without var1
    <%/TMPL_UNLESS%>
    <%TMPL_UNLESS NAME=show_var2%>
      <%TMPL_VAR NAME=var2%>
    <%TMPL_ELSE%>
      without var2
    <%/TMPL_UNLESS%>
  </div>
  <div id="unit18_res">
    
      without var1
    
    
      test
    
  </div>

  <!-- unit 19 -->
  <div id="unit19"><!--
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var2%>
    <%/TMPL_LOOP%>
  --></div>
  <div id="unit19_res">
    
      123
      pooiu 
    
  </div>

  <!-- unit 20 -->
  <div id="unit20">
    <!--
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var2%>
    <%/TMPL_LOOP%>
    -->
  </div>
  <div id="unit20_res">
    
    
      123
      pooiu 
    
    
  </div>

  <!-- unit 21 -->
  <div id="unit21">
    <%Tmpl_LooP NAMe=loop1%>
      <%Tmpl_iF Name=var1%>
        <%tmpl_var name=var1%>
      <%Tmpl_elsE%>
        ee
      <%/tmpL_if%>
      <%tmpl_unlESS NaME=var2%>
        ff
      <%TMPL_else%>
        <%tmpl_VAR NamE=var2%>
      <%/tmpl_unless%>
    <%/TmpL_LOOp%>
  </div>
  <div id="unit21_res">
    
      
        123
      
      
        pooiu 
      
    
  </div>

  <!-- unit 22 -->
  <div id="unit22">
    <!--%TMPL_LOOP NAME=loop1%-->
      <!--%TMPL_IF NAME=var1%-->
        <!--%TMPL_VAR NAME=var1%-->
      <!--%TMPL_ELSE%-->
        ee
      <!--%/TMPL_IF%-->
      <!--%TMPL_UNLESS NAME=var2%-->
        ff
      <!--%TMPL_ELSE%-->
        <!--%TMPL_VAR NAME=var2%-->
      <!--%/TMPL_UNLESS%-->
    <!--%/TMPL_LOOP%-->
  </div>
  <div id="unit22_res">
    
      
        123
      
      
        pooiu 
      
    
  </div>

  <!-- unit 23 -->
  <div id="unit23">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var3%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit23_res">
  </div>

  <!-- unit 24 -->
  <div id="unit24">
    <%TMPL_LOOP NAME=loop2%>
      <%TMPL_VAR NAME=var1%>
      <%TMPL_VAR NAME=var3%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit24_res">
  </div>

  <!-- unit 25 -->
  <div id="unit25">
    <%TMPL_LOOP NAME=loop1%>
      <%TMPL_IF NAME=var3%>
        <%TMPL_VAR NAME=var1%>
      <%/TMPL_IF%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit25_res">
  </div>

  <!-- unit 26 -->
  <div id="unit26">
    <%TmPl_loop NAME=loop1%>
      <%tmpl_if NAME=var1%>
        <%tmpl_Var NAME=var2%>
      <%/Tmpl_If%>
    <%/Tmpl_LoOp%>
  </div>
  <div id="unit26_res">
    
      
        pooiu 
      
    
  </div>

  <!-- unit 27 -->
  <div id="unit27">
    <%TMPL_VAR   NAME=var1%>
    <%TMPL_VAR  DEFAULT=ee      NAME=var2%>
    <%TMPL_VAR    DEFAULT=ee        NAME=var3%>
  </div>
  <div id="unit27_res">
    tt
    qq
    ee
  </div>

  <!-- unit 28 -->
  <div id="unit28">
    <%TMPL_LOOP    NAME=loop1%>
      <%TMPL_VAR NAME=var1%>
    <%/TMPL_LOOP%>
  </div>
  <div id="unit28_res">
    
      123
    
  </div>

  <!-- unit 29 -->
  <div id="unit29">
    <%TMPL_IF    NAME=show_var1%>
      <%TMPL_VAR NAME=var1%>
    <%/TMPL_IF%>
    <%TMPL_IF     NAME=show_var2%>
      <%TMPL_VAR NAME=var2%>
    <%/TMPL_IF%>
  </div>
  <div id="unit29_res">
    
      123
    
    
  </div>

  <!-- unit 30 -->
  <div id="unit30">
    <%TMPL_UNLESS    NAME=show_var1%>
      <%TMPL_VAR NAME=var1%>
    <%/TMPL_UNLESS%>
    <%TMPL_UNLESS     NAME=show_var2%>
      <%TMPL_VAR NAME=var2%>
    <%/TMPL_UNLESS%>
  </div>
  <div id="unit30_res">
    
    
      test
    
  </div>

  <!-- unit 31 -->
  <div id="unit31">
    <%TMPL_VAR  NAME="var1"%>
    <%TMPL_VAR  DEFAULT="ee  "    NAME="var2"%>
    <%TMPL_VAR    DEFAULT="ee j"       NAME=var3%>
  </div>
  <div id="unit31_res">
    tt
    qq
    ee j
  </div>

  </div>
</body>
</html>

