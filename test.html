<!DOCTYPE html>
<html>
<head>
  <title>htmltmpl test</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <script type="text/javascript" src="htmltmpl/core.js"></script>
  <script type="text/javascript" src="htmltmpl/ifdef.js"></script>
  <script type="text/javascript" src="htmltmpl/ifeq.js"></script>
  <script type="text/javascript" src="htmltmpl/list.js"></script>
  <script type="text/javascript">
    var tmpl;  // make tmpl a global var for debug purposes
    var span_ok, span_fail, res_cntr_el;
    var tests_ok = 0, tests_fail = 0;
    var tests = [ { id: "unit0",
                    id_res: "unit0_res",
                    as_str: 1,
                    title: "Test template as string",
                    data: { var1: 1,
                            var2: "test",
                            var3: 234,
                            var_long_name4: "asdf123" } },
                  { id: "unit1",
                    id_res: "unit1_res",
                    title: "Test TMPL_VAR",
                    data: { var1: 1,
                            var2: "test",
                            var3: 234,
                            var_long_name4: "asdf123" } },
                  { id: "unit2",
                    id_res: "unit2_res",
                    title: "Test TMPL_VAR with a no var data",
                    data: { var1: 123 } },
                  { id: "unit3",
                    id_res: "unit3_res",
                    title: "Test TMPL_VAR with DEFAULT attribute",
                    data: { var1: 123,
                            var3: "test" } },
                  { id: "unit4",
                    id_res: "unit4_res",
                    title: "Test TMPL_LOOP",
                    data: { var1: 1,
                            var2: "test",
                            loop1: [ { var1: 123,
                                       var2: "asdf",
                                       var3: "qwer" },
                                     { var1: 456,
                                       var2: "uikj",
                                       var3: "zxcv" },
                                     { var1: "lk jfd",
                                       var2: 789,
                                       var3: "pooiu " } ],
                            var_long_name: "ffff" } },
                  { id: "unit5",
                    id_res: "unit5_res",
                    title: "Test TMPL_LOOP with an empty loop data",
                    data: { loop1: [ ] } },
                  { id: "unit6",
                    id_res: "unit6_res",
                    title: "Test TMPL_LOOP with global_vars option",
                    prms: { global_vars: 1 },
                    data: { var1: 1,
                            var2: "test",
                            var3: "glb",
                            loop1: [ { var1: 123,
                                       var2: "asdf" },
                                     { var1: 456,
                                       var2: "uikj" },
                                     { var1: "lk jfd",
                                       var2: 789 } ],
                            var_long_name: "ffff" } },
                  { id: "unit7",
                    id_res: "unit7_res",
                    title: "Test TMPL_LOOP without needed var",
                    data: { var1: 1,
                            var2: "test",
                            loop1: [ { var1: 123,
                                       var3: "qwer" },
                                     { var1: 456,
                                       var3: "zxcv" },
                                     { var1: "lk jfd",
                                       var3: "pooiu " } ],
                            var_long_name: "ffff" } },
                  { id: "unit8",
                    id_res: "unit8_res",
                    title: "Test inner TMPL_LOOP",
                    data: { loop1: [ { var1: 123,
                                       var2: "qwer",
                                       var3: "lkjk",
                                       loop2: [ { var1: "asdf",
                                                  var2: "jhgf",
                                                  var3: "jhhhf" },
                                                { var1: "asdf1",
                                                  var2: "jjjj2",
                                                  var3: "aaaa2" },
                                                { var1: "dfdf3",
                                                  var2: "dfdf4",
                                                  var3: "dfdf5" } ] },
                                     { var1: 456,
                                       var2: "kjkj",
                                       var3: "aaaa12",
                                       loop2: [ { var1: "asdf1",
                                                  var2: "jhgf1",
                                                  var3: "jhhhf1" },
                                                { var1: "asdf2",
                                                  var2: "jjjj3",
                                                  var3: "aaaa3" },
                                                { var1: "dfdf7",
                                                  var2: "dfdf8",
                                                  var3: "dfdf9" } ] } ] } },
                  { id: "unit9",
                    id_res: "unit9_res",
                    title: "Test inner TMPL_LOOP with global_vars option",
                    prms: { global_vars: 1 },
                    data: { loop2: [ { var1: "asdf",
                                       var2: "jhgf",
                                       var3: "jhhhf" },
                                     { var1: "asdf1",
                                       var2: "jjjj2",
                                       var3: "aaaa2" },
                                     { var1: "dfdf3",
                                       var2: "dfdf4",
                                       var3: "dfdf5" } ],
                            loop1: [ { var1: 123,
                                       var2: "qwer",
                                       var3: "lkjk" },
                                     { var1: 456,
                                       var2: "kjkj",
                                       var3: "aaaa12" } ] } },
                  { id: "unit10",
                    id_res: "unit10_res",
                    title: "Test TMPL_LOOP (3 pass) with loop_context_vars option",
                    prms: { loop_context_vars: 1 },
                    data: { loop1: [ { var1: 123,
                                       var3: "qwer" },
                                     { var1: 456,
                                       var3: "zxcv" },
                                     { var1: "lk jfd",
                                       var3: "pooiu " } ] } },
                  { id: "unit11",
                    id_res: "unit11_res",
                    title: "Test TMPL_LOOP (2 pass) with loop_context_vars option",
                    prms: { loop_context_vars: 1 },
                    data: { loop1: [ { var1: 123,
                                       var3: "qwer" },
                                     { var1: "lk jfd",
                                       var3: "pooiu " } ] } },
                  { id: "unit12",
                    id_res: "unit12_res",
                    title: "Test TMPL_LOOP (1 pass) with loop_context_vars option",
                    prms: { loop_context_vars: 1 },
                    data: { loop1: [ { var1: 123,
                                       var3: "pooiu " } ] } },
                  { id: "unit13",
                    id_res: "unit13_res",
                    title: "Test TMPL_IF",
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit14",
                    id_res: "unit14_res",
                    title: "Test TMPL_IF with a no var data",
                    data: { var1: 123,
                            var3: "test" } },
                  { id: "unit15",
                    id_res: "unit15_res",
                    title: "Test TMPL_IF with TMPL_ELSE",
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit16",
                    id_res: "unit16_res",
                    title: "Test TMPL_UNLESS",
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit17",
                    id_res: "unit17_res",
                    title: "Test TMPL_UNLESS with a no var data",
                    data: { var1: 123,
                            var3: "test" } },
                  { id: "unit18",
                    id_res: "unit18_res",
                    title: "Test TMPL_UNLESS with TMPL_ELSE",
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit19",
                    id_res: "unit19_res",
                    title: "Test tmpl_is_commented option",
                    prms: { tmpl_is_commented: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit20",
                    id_res: "unit20_res",
                    title: "Test tmpl_is_commented option",
                    prms: { tmpl_is_commented: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit21",
                    id_res: "unit21_res",
                    title: "Test case_sensitive option",
                    prms: { case_sensitive: 0 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit23",
                    id_res: "unit23_res",
                    title: "Test the err_on_no_data option & TMPL_VAR",
                    is_err: 1,
                    err_msg: "Cann't find var 'var3'.",
                    prms: { err_on_no_data: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit24",
                    id_res: "unit24_res",
                    title: "Test the err_on_no_data option & TMPL_LOOP",
                    is_err: 1,
                    err_msg: "Cann't find loop 'loop2'.",
                    prms: { err_on_no_data: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit25",
                    id_res: "unit25_res",
                    title: "Test the err_on_no_data option & TMPL_IF",
                    is_err: 1,
                    err_msg: "Cann't find var 'var3'.",
                    prms: { err_on_no_data: 1 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit26",
                    id_res: "unit26_res",
                    title: "Test the case_sensitive option",
                    prms: { case_sensitive: 0 },
                    data: { loop1: [ { var1: 123,
                                       var2: "pooiu " } ] } },
                  { id: "unit27",
                    id_res: "unit27_res",
                    title: "Test more than one space inside TMPL_VAR construction",
                    data: { var1: "tt",
                            var2: "qq" } },
                  { id: "unit28",
                    id_res: "unit28_res",
                    title: "Test more than one space inside TMPL_LOOP construction",
                    data: { loop1: [ { var1: 123 } ] } },
                  { id: "unit29",
                    id_res: "unit29_res",
                    title: "Test more than one space inside TMPL_IF construction",
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit30",
                    id_res: "unit30_res",
                    title: "Test more than one space inside TMPL_UNLESS construction",
                    data: { show_var1: 1,
                            var1: 123,
                            show_var2: 0,
                            var2: "test" } },
                  { id: "unit31",
                    id_res: "unit31_res",
                    title: "Test quoted arguments in TMPL_VAR",
                    data: { var1: "tt",
                            var2: "qq" } },
                  { id: "unit32",
                    id_res: "unit32_res",
                    title: "TMPL_VAR in input attribute",
                    data: { var1: "name1" } },
                  { id: "unit33",
                    id_res: "unit33_res",
                    title: "TMPL_LOOP and TMPL_VAR in select",
                    data: { loop1: [ { var1: "1", var2: "a1" },
                                     { var1: "2", var2: "a2" } ] } },
                  { id: "unit34",
                    id_res: "unit34_res",
                    title: "TMPL_LOOP and TMPL_VAR in table (should fail)",
                    data: { loop1: [ { loop2: [ {var1: "a1" }, { var1: "a2" } ] },
                                     { loop2: [ {var1: "b1" }, { var1: "b2" } ] }]}},
                  { id: "unit35",
                    id_res: "unit35_res",
                    title: "TMPL_LOOP and TMPL_VAR and tmpl_is_commented in table",
                    prms: { tmpl_is_commented: 1 },
                    data: { loop1: [ { loop2: [ {var1: "a1" }, { var1: "a2" } ] },
                                     { loop2: [ {var1: "b1" }, { var1: "b2" } ] }]}},
                  { id: "unit36",
                    id_res: "unit36_res",
                    title: "TMPL_IFDEF",
                    data: { var1: 0, var2: 1 }},
                  { id: "unit37",
                    id_res: "unit37_res",
                    title: "TMPL_IFDEF with TMPL_ELSE",
                    data: { var1: 0, var2: 1 }},
                  { id: "unit38",
                    id_res: "unit38_res",
                    title: "TMPL_IFNDEF",
                    data: { var1: 0, var2: 1 }},
                  { id: "unit38",
                    id_res: "unit38_res",
                    title: "TMPL_IFNDEF with TMPL_ELSE",
                    data: { var1: 0, var2: 1 }},
                  { id: "unit40",
                    id_res: "unit40_res",
                    title: "Test nested TMPL_IF with TMPL_ELSE",
                    data: { show_var1: 1,
                            show_var11: 1,
                            show_var12: 0,
                            var1: 123,
                            show_var2: 0 } },
                  { id: "unit41",
                    id_res: "unit41_res",
                    title: "Test nested TMPL_UNLESS with TMPL_ELSE",
                    data: { show_var1: 0,
                            show_var11: 0,
                            show_var12: 1,
                            var1: 123,
                            show_var2: 1 } },
                  { id: "unit42",
                    id_res: "unit42_res",
                    title: "Test TMPL_UNLESS inside TMPL_IF with TMPL_ELSE",
                    data: { show_var1: 1,
                            show_var11: 1,
                            show_var12: 0,
                            var1: 123,
                            show_var2: 0 } },
                  { id: "unit43",
                    id_res: "unit43_res",
                    title: "Test TMPL_IF inside TMPL_UNLESS with TMPL_ELSE",
                    data: { show_var1: 1,
                            show_var11: 1,
                            show_var12: 0,
                            var1: 123,
                            show_var2: 0 } },
                  { id: "unit44",
                    id_res: "unit44_res",
                    title: "Test nested TMPL_IFDEF with TMPL_ELSE",
                    data: { show_var1: 0,
                            show_var11: 0,
                            var1: 123 } },
                  { id: "unit45",
                    id_res: "unit45_res",
                    title: "Test nested TMPL_IFNDEF with TMPL_ELSE",
                    data: { show_var12: 0,
                            var1: 123,
                            show_var2: 0 } },
                  { id: "unit46",
                    id_res: "unit46_res",
                    title: "Test TMPL_IFNDEF inside TMPL_IFDEF with TMPL_ELSE",
                    data: { show_var1: 0,
                            show_var11: 0,
                            var1: 123 } },
                  { id: "unit47",
                    id_res: "unit47_res",
                    title: "Test TMPL_IFDEF inside TMPL_IFNDEF with TMPL_ELSE",
                    data: { show_var1: 0,
                            show_var11: 0,
                            var1: 123 } },
                  { id: "unit48",
                    id_res: "unit48_res",
                    title: "Test ret_dom option",
                    prms: { ret_dom: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit49",
                    id_res: "unit49_res",
                    title: "Test ret_dom option with strip_wrap_spaces=0",
                    prms: { ret_dom: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: nodes_to_str },
                  { id: "unit50",
                    id_res: "unit50_res",
                    title: "Test ret_dom option with strip_wrap_spaces=1",
                    prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit51",
                    id_res: "unit51_res",
                    title: "Test ret_dom option: autodect of tbody first element",
                   prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit52",
                    id_res: "unit52_res",
                    title: "Test ret_dom option: autodect of thead first element",
                   prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit53",
                    id_res: "unit53_res",
                    title: "Test ret_dom option: autodect of tfoot first element",
                   prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit54",
                    id_res: "unit54_res",
                    title: "Test ret_dom option: autodect of tr first element",
                    prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit55",
                    id_res: "unit55_res",
                    title: "Test ret_dom option: autodect of th first element",
                    prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit56",
                    id_res: "unit56_res",
                    title: "Test ret_dom option: autodect of td first element",
                    prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit57",
                    id_res: "unit57_res",
                    title: "Test ret_dom option: autodect of tbody first element(upper case)",
                    prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit58",
                    id_res: "unit58_res",
                    title: "Test ret_dom option: autodect of tbody first element(mixed case)",
                    prms: { ret_dom: 1,
                            strip_wrap_spaces: 1 },
                    data: { var1: 1 },
                    ret_to_str_fun: node_to_str },
                  { id: "unit59",
                    id_res: "unit59_res",
                    title: "Test TMPL_IFEQ",
                    data: { var1: 1 }},
                  { id: "unit60",
                    id_res: "unit60_res",
                    title: "Test TMPL_IFEQ (not matched)",
                    data: { var1: 1 }},
                  { id: "unit61",
                    id_res: "unit61_res",
                    title: "Test TMPL_IFEQ with TMPL_ELSE",
                    data: { var1: 1 }},
                  { id: "unit62",
                    id_res: "unit62_res",
                    title: "Test TMPL_IFEQ (not matched) with TMPL_ELSE",
                    data: { var1: 1 }},
                  { id: "unit63",
                    id_res: "unit63_res",
                    title: "Test TMPL_IFEQ WITH",
                    data: { var1: 1,
                    	var2: 1 }},
                  { id: "unit64",
                    id_res: "unit64_res",
                    title: "Test TMPL_IFEQ WITH (not matched)",
                    data: { var1: 1,
                    	var2: 2 }},
                  { id: "unit65",
                    id_res: "unit65_res",
                    title: "Test TMPL_IFEQ WITH with TMPL_ELSE",
                    data: { var1: 1,
                    	var2: 1 }},
                  { id: "unit66",
                    id_res: "unit66_res",
                    title: "Test TMPL_IFEQ WITH (not matched) with TMPL_ELSE",
                    data: { var1: 1,
                    	var2: 2 }},
                  { id: "unit67",
                    id_res: "unit67_res",
                    title: "Test TMPL_IFNEQ",
                    data: { var1: 1 }},
                  { id: "unit68",
                    id_res: "unit68_res",
                    title: "Test TMPL_IFNEQ (not matched)",
                    data: { var1: 1 }},
                  { id: "unit69",
                    id_res: "unit69_res",
                    title: "Test TMPL_IFNEQ with TMPL_ELSE",
                    data: { var1: 1 }},
                  { id: "unit70",
                    id_res: "unit70_res",
                    title: "Test TMPL_IFNEQ (not matched) with TMPL_ELSE",
                    data: { var1: 1 }},
                  { id: "unit71",
                    id_res: "unit71_res",
                    title: "Test TMPL_IFNEQ WITH",
                    data: { var1: 1,
                    	var2: 2 }},
                  { id: "unit72",
                    id_res: "unit72_res",
                    title: "Test TMPL_IFNEQ WITH (not matched)",
                    data: { var1: 1,
                    	var2: 1 }},
                  { id: "unit73",
                    id_res: "unit73_res",
                    title: "Test TMPL_IFNEQ WITH with TMPL_ELSE",
                    data: { var1: 1,
                    	var2: 2 }},
                  { id: "unit74",
                    id_res: "unit74_res",
                    title: "Test TMPL_IFNEQ WITH (not matched) with TMPL_ELSE",
                    data: { var1: 1,
                    	var2: 1 }},
                  { id: "unit75",
                    id_res: "unit75_res",
                    title: "Test TMPL_IFGT",
                    data: { var1: 5 }},
                  { id: "unit76",
                    id_res: "unit76_res",
                    title: "Test TMPL_IFGT (not matched)",
                    data: { var1: 5 }},
                  { id: "unit77",
                    id_res: "unit77_res",
                    title: "Test TMPL_IFGT with TMPL_ELSE",
                    data: { var1: 5 }},
                  { id: "unit78",
                    id_res: "unit78_res",
                    title: "Test TMPL_IFGT (not matched) with TMPL_ELSE",
                    data: { var1: 5 }},
                  { id: "unit79",
                    id_res: "unit79_res",
                    title: "Test TMPL_IFGE",
                    data: { var1: 5 }},
                  { id: "unit80",
                    id_res: "unit80_res",
                    title: "Test TMPL_IFGE (not matched)",
                    data: { var1: 5 }},
                  { id: "unit81",
                    id_res: "unit81_res",
                    title: "Test TMPL_IFGE with TMPL_ELSE",
                    data: { var1: 5 }},
                  { id: "unit82",
                    id_res: "unit82_res",
                    title: "Test TMPL_IFGE (not matched) with TMPL_ELSE",
                    data: { var1: 5 }},
                  { id: "unit83",
                    id_res: "unit83_res",
                    title: "Test TMPL_IFLT",
                    data: { var1: 5 }},
                  { id: "unit84",
                    id_res: "unit84_res",
                    title: "Test TMPL_IFLT (not matched)",
                    data: { var1: 5 }},
                  { id: "unit85",
                    id_res: "unit85_res",
                    title: "Test TMPL_IFLT with TMPL_ELSE",
                    data: { var1: 5 }},
                  { id: "unit86",
                    id_res: "unit86_res",
                    title: "Test TMPL_IFLT (not matched) with TMPL_ELSE",
                    data: { var1: 5 }},
                  { id: "unit87",
                    id_res: "unit87_res",
                    title: "Test TMPL_IFLE",
                    data: { var1: 5 }},
                  { id: "unit88",
                    id_res: "unit88_res",
                    title: "Test TMPL_IFLE (not matched)",
                    data: { var1: 5 }},
                  { id: "unit89",
                    id_res: "unit89_res",
                    title: "Test TMPL_IFLE with TMPL_ELSE",
                    data: { var1: 5 }},
                  { id: "unit90",
                    id_res: "unit90_res",
                    title: "Test TMPL_IFLE (not matched) with TMPL_ELSE",
                    data: { var1: 5 }},
                  { id: "unit91",
                    id_res: "unit91_res",
                    title: "Test {% in template",
                    data: { var1: 5 }},
                  { id: "unit92",
                    id_res: "unit92_res",
                    as_str: 1,
                    title: "Test tmpl with numbers",
                    data: { var1: 1,
                            var2: 2}},
                  { id: "unit93",
                    id_res: "unit93_res",
                    title: "Test tmpl with numbers",
                    data: { var1: 1,
                            var2: 2}},
                  { id: "unit94",
                    id_res: "unit94_res",
                    title: "Test TMPL_LIST (empty, nodata)",
                    data: {list1: []}},
                  { id: "unit95",
                    id_res: "unit95_res",
                    title: "Test TMPL_LIST (empty)",
                    data: {list1: [1, 2, 3]}},
                  { id: "unit96",
                    id_res: "unit96_res",
                    title: "Test TMPL_LIST (nodata)",
                    data: {list1: []}},
                  { id: "unit97",
                    id_res: "unit97_res",
                    title: "Test TMPL_LIST (numbers, notext)",
                    data: {list1: [1, 2, 3]}},
                  { id: "unit98",
                    id_res: "unit98_res",
                    title: "Test TMPL_LIST (numbers)",
                    data: {list1: [1, 2, 3]}},
                  { id: "unit99",
                    id_res: "unit99_res",
                    title: "Test TMPL_LIST (numbers)",
                    data: {list1: [1, 2, 3]}},
                  { id: "unit100",
                    id_res: "unit100_res",
                    title: "Test TMPL_LIST (number with strings)",
                    data: {list1: [1, "word", 3, "again"]}},
                  { id: "unit101",
                    id_res: "unit101_res",
                    title: "Test TMPL_LIST (TMPL_LISTITEM repeated)",
                    data: {list1: [1, "word", 3, "again"]}},
                  { id: "unit102",
                    id_res: "unit102_res",
                    is_err: 1,
                    err_msg: "parse err: TMPL_LISTITEM can be used only inside a TMPL_LIST",
                    title: "Test TMPL_LISTITEM outside TMPL_LIST(should fail)",
                    data: {list1: [1, "word", 3, "again"]}},
                  { id: "unit103",
                    id_res: "unit103_res",
                    title: "Test TMPL_LIST(with TMPL_VAR inside)",
                    data: {list1: [1, "word", 3]}},
                  { id: "unit104",
                    id_res: "unit104_res",
                    prms: { global_vars: 1 },
                    title: "Test TMPL_LIST(with TMPL_VAR, global_vars)",
                    data: {w: "T", list1: [1, "word", 3]}},
                  { id: "unit105",
                    id_res: "unit105_res",
                    prms: { loop_context_vars: 1 },
                    title: "Test TMPL_LIST (3 pass) with loop_context_vars option",
                    data: {list1: [1, "word", 3]}},
                  { id: "unit106",
                    id_res: "unit106_res",
                    prms: { loop_context_vars: 1 },
                    title: "Test TMPL_LIST (2 pass) with loop_context_vars option",
                    data: {list1: [1, "word"]}},
                  { id: "unit107",
                    id_res: "unit107_res",
                    prms: { loop_context_vars: 1 },
                    title: "Test TMPL_LIST (1 pass) with loop_context_vars option",
                    data: {list1: [1]}},
                  { id: "unit108",
                    id_res: "unit108_res",
                    title: "Test single quote in attribute value",
                    data: {}},
                  { id: "unit109",
                    id_res: "unit109_res",
                    title: "Test double quote in attribute value",
                    data: {}},
                  { id: "unit110",
                    id_res: "unit110_res",
                    title: "Test TMPL_VAR ESCAPE=ETEXT",
                    ret: "q&lt;&amp;text &gt; \"with' &amp;&lt;&gt; uns&amp;&lt;&gt;afe &lt;chars&gt;a",
                    data: {var1: "<&text > \"with' &<> uns&<>afe <chars>"}},
                  { id: "unit110.1",
                    id_res: "unit110.1_res",
                    prms: {case_sensitive: 0},
                    title: "Test TMPL_VAR ESCAPE=ETEXT, case_sensitive=0",
                    ret: "q&lt;&amp;text &gt; \"with' &amp;&lt;&gt; uns&amp;&lt;&gt;afe &lt;chars&gt;a",
                    data: {var1: "<&text > \"with' &<> uns&<>afe <chars>"}},
                  { id: "unit111",
                    id_res: "unit111_res",
                    title: "Test TMPL_VAR ESCAPE=AVAL",
                    ret: "q<&text > &quot;with&#39; &<> &quot;&quot;&#39;uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}},
                  { id: "unit111.1",
                    id_res: "unit111.1_res",
                    prms: {case_sensitive: 0},
                    title: "Test TMPL_VAR ESCAPE=AVAL, case_sensitive=0",
                    ret: "q<&text > &quot;with&#39; &<> &quot;&quot;&#39;uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}},
                  { id: "unit112",
                    id_res: "unit112_res",
                    title: "Test TMPL_VAR ESCAPE=NO",
                    ret: "q<&text > \"with' &<> \"\"'uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}},
                  { id: "unit112.1",
                    id_res: "unit112.1_res",
                    prms: {case_sensitive: 0},
                    title: "Test TMPL_VAR ESCAPE=NO, case_sensitive=0",
                    ret: "q<&text > \"with' &<> \"\"'uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}},
                  { id: "unit113",
                    id_res: "unit113_res",
                    is_err: 1,
                    err_msg: "hdlr_var_parse err: ESCAPE attribute bad value: 'etexT'",
                    title: "Test TMPL_VAR ESCAPE with wrong value",
                    ret: "q<&text > \"with' &<> \"\"'uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}},
                  { id: "unit113.1",
                    id_res: "unit113.1_res",
                    is_err: 1,
                    err_msg: "hdlr_var_parse err: ESCAPE attribute bad value: 'aVAL'",
                    title: "Test TMPL_VAR ESCAPE with wrong value",
                    ret: "q<&text > \"with' &<> \"\"'uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}},
                  { id: "unit113.2",
                    id_res: "unit113.2_res",
                    is_err: 1,
                    err_msg: "hdlr_var_parse err: ESCAPE attribute bad value: 'no'",
                    title: "Test TMPL_VAR ESCAPE with wrong value",
                    ret: "q<&text > \"with' &<> \"\"'uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}},
                  { id: "unit113.3",
                    id_res: "unit113.3_res",
                    is_err: 1,
                    err_msg: "hdlr_var_parse err: ESCAPE attribute bad value: '2'",
                    title: "Test TMPL_VAR ESCAPE with wrong value",
                    ret: "q<&text > \"with' &<> \"\"'uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}},
                  { id: "unit113.4",
                    id_res: "unit113.4_res",
                    is_err: 1,
                    err_msg: "hdlr_var_parse err: ESCAPE attribute bad value: '2'",
                    title: "Test TMPL_VAR ESCAPE with wrong value",
                    ret: "q<&text > \"with' &<> \"\"'uns&<>afe <chars>a",
                    data: {var1: "<&text > \"with' &<> \"\"'uns&<>afe <chars>"}}];
    function report_res(test, ret, ex)
    {
        var val, eret;


        if ( test.is_err )
            if (( ex != undefined ) && ( test.err_msg == ex ))
                return report_ok(test);
            else {
                console.error(ex);
                return report_fail(test);
            }

        if ( ex != undefined ) {
            console.error(ex);
            return report_fail(test);
        }

        if (test.ret_to_str_fun != undefined)
            ret = test.ret_to_str_fun(ret)
        if (test.ret != null)
            eret = test.ret;
        else
            eret = document.getElementById(test.id_res).innerHTML;
        if (eret  == ret )
            return report_ok(test);
        
        return report_fail(test);
    }
    
    function node_to_str(ret)
    {
    	var el;
    	
    	
    	el = document.createElement("div");
    	el.appendChild(ret);
    	return el.innerHTML;
    }
    
    function nodes_to_str(ret)
    {
        var el, i, els = [];
        
        
        el = document.createElement("div");
        console.log(ret.length);
        for(i = 0; i < ret.length; i++) {
            els[i] = ret[i];
        }
        for(i = 0; i < els.length; i++) {
            el.appendChild(els[i]);
        }
        return el.innerHTML;
    }

    function report_ok(test)
    {
        var el, span;


        el = document.createElement("div");
        span = document.createElement("span");
        span.innerHTML = "test '" + test.id + "' (" + test.title + "): ";
        el.appendChild(span);
        el.appendChild(span_ok.cloneNode(true));
        res_cntr_el.appendChild(el);

        tests_ok++;
        
        return 1;
    }

    function report_fail(test)
    {
        var el, span;


        el = document.createElement("div");
        span = document.createElement("span");
        span.innerHTML = "test '" + test.id + "' (" + test.title + "): ";
        el.appendChild(span);
        el.appendChild(span_fail.cloneNode(true));
        res_cntr_el.appendChild(el);
        
        tests_fail++;

        return 0;
    }

    function do_tests()
    {
        var i;
        var ret;
        var etime = Date.now();


        span_ok = document.getElementById("results_ok");
        span_fail = document.getElementById("results_fail");
        res_cntr_el = document.getElementById("results");

        // set counter initial value
        document.getElementById("counter").innerHTML = "0/" + tests.length;

        htmltmpl.p.strip_wrap_spaces = 0;

        for(i = 0; i < tests.length; i++) {
            try {
		if ( tests[i].as_str )
                    tmpl = new htmltmpl(document.getElementById(tests[i].id).innerHTML,
                       tests[i].prms);
		else
                    tmpl = new htmltmpl(document.getElementById(tests[i].id), tests[i].prms);
	    } catch (ex) {
		report_res(tests[i], undefined, ex);
                continue;
	    }
	    try {
                ret = tmpl.apply(tests[i].data);
            } catch (ex) {
                report_res(tests[i], undefined, ex);
                continue;
            }
        console.log(tests[i].id + ": " + JSON.stringify(tmpl.tmpl_parsed));
        console.log(tests[i].id + " got: '" + ret + "'");
           try {
	        if (!report_res(tests[i], ret, null))
	            continue;
	    } catch (ex) {
	        report_res(tests[i], null, ex);
	        continue;
	    }

        }
        // set counter
        document.getElementById("counter").innerHTML = tests.length + "/" + tests_ok + "/" + tests_fail;
       etime = (Date.now() - etime)/1000;
        document.getElementById("time").innerHTML = etime;
   }
  </script>
</head>
<body onload="do_tests()">
  <div style="margin: 1em">
    tests(total/ok/fail): <span id="counter">0/0</span>
    (<span id="time"></span>s)
  </div>

  <div id="results">
  </div>

  <div style="display: none">
  <span id="results_fail" style="color: red; font-weight: bold">fail</span>
  <span id="results_ok" style="color: green; font-weight: bold">ok</span>

  <!-- unit 0 -->
  <div id="unit0">
    {%TMPL_VAR NAME=var1%}
    another
    {%TMPL_VAR NAME=var2%}
    text
    {%TMPL_VAR NAME=var3%}
    here
    {%TMPL_VAR NAME=var_long_name4%}
  </div>
  <div id="unit0_res">
    1
    another
    test
    text
    234
    here
    asdf123
  </div>

  <!-- unit 1 -->
  <div id="unit1">
    {%TMPL_VAR NAME=var1%}
    {%TMPL_VAR NAME=var2%}
    {%TMPL_VAR NAME=var3%}
    {%TMPL_VAR NAME=var_long_name4%}
  </div>
  <div id="unit1_res">
    1
    test
    234
    asdf123
  </div>

  <!-- unit 2 -->
  <div id="unit2">
    {%TMPL_VAR NAME=var1%}
    {%TMPL_VAR NAME=var2%}
  </div>
  <div id="unit2_res">
    123
    
  </div>

  <!-- unit 3 -->
  <div id="unit3">
    {%TMPL_VAR DEFAULT=test1 NAME=var1%}
    {%TMPL_VAR DEFAULT=test1 NAME=var2%}
  </div>
  <div id="unit3_res">
    123
    test1
  </div>

  <!-- unit 4 -->
  <div id="unit4">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var2%}
      {%TMPL_VAR NAME=var3%}
    {%/TMPL_LOOP%}
    {%TMPL_VAR NAME=var1%}
    {%TMPL_VAR NAME=var2%}
    {%TMPL_VAR NAME=var_long_name%}
  </div>
  <div id="unit4_res">
    
      123
      asdf
      qwer
    
      456
      uikj
      zxcv
    
      lk jfd
      789
      pooiu 
    
    1
    test
    ffff
  </div>

  <!-- unit 5 -->
  <div id="unit5">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_IF NAME=var3%}
        {%TMPL_VAR NAME=var1%}
      {%/TMPL_IF%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit5_res">
    
  </div>

  <!-- unit 6 -->
  <div id="unit6">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var2%}
      {%TMPL_VAR NAME=var3%}
    {%/TMPL_LOOP%}
    {%TMPL_VAR NAME=var1%}
    {%TMPL_VAR NAME=var2%}
    {%TMPL_VAR NAME=var_long_name%}
  </div>
  <div id="unit6_res">
    
      123
      asdf
      glb
    
      456
      uikj
      glb
    
      lk jfd
      789
      glb
    
    1
    test
    ffff
  </div>

  <!-- unit 7 -->
  <div id="unit7">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var2%}
      {%TMPL_VAR NAME=var3%}
    {%/TMPL_LOOP%}
    {%TMPL_VAR NAME=var1%}
    {%TMPL_VAR NAME=var2%}
    {%TMPL_VAR NAME=var_long_name%}
  </div>
  <div id="unit7_res">
    
      123
      
      qwer
    
      456
      
      zxcv
    
      lk jfd
      
      pooiu 
    
    1
    test
    ffff
  </div>

  <!-- unit 8 -->
  <div id="unit8">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var2%}
      {%TMPL_VAR NAME=var3%}
      {%TMPL_LOOP NAME=loop2%}
        {%TMPL_VAR NAME=var1%}
        {%TMPL_VAR NAME=var2%}
        {%TMPL_VAR NAME=var3%}
      {%/TMPL_LOOP%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit8_res">
    
      123
      qwer
      lkjk
      
        asdf
        jhgf
        jhhhf
      
        asdf1
        jjjj2
        aaaa2
      
        dfdf3
        dfdf4
        dfdf5
      
    
      456
      kjkj
      aaaa12
      
        asdf1
        jhgf1
        jhhhf1
      
        asdf2
        jjjj3
        aaaa3
      
        dfdf7
        dfdf8
        dfdf9
      
    
  </div>    

  <!-- unit 9 -->
  <div id="unit9">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var2%}
      {%TMPL_VAR NAME=var3%}
      {%TMPL_LOOP NAME=loop2%}
        {%TMPL_VAR NAME=var1%}
        {%TMPL_VAR NAME=var2%}
        {%TMPL_VAR NAME=var3%}
      {%/TMPL_LOOP%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit9_res">
    
      123
      qwer
      lkjk
      
        asdf
        jhgf
        jhhhf
      
        asdf1
        jjjj2
        aaaa2
      
        dfdf3
        dfdf4
        dfdf5
      
    
      456
      kjkj
      aaaa12
      
        asdf
        jhgf
        jhhhf
      
        asdf1
        jjjj2
        aaaa2
      
        dfdf3
        dfdf4
        dfdf5
      
    
  </div>    

  <!-- unit 10 -->
  <div id="unit10">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=__first__%}
      {%TMPL_VAR NAME=__last__%}
      {%TMPL_VAR NAME=__inner__%}
      {%TMPL_VAR NAME=__outer__%}
      {%TMPL_VAR NAME=__odd__%}
      {%TMPL_VAR NAME=__even__%}
      {%TMPL_VAR NAME=__counter__%}
      {%TMPL_VAR NAME=__index__%}

      {%TMPL_VAR NAME=var1%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit10_res">
    
      1
      0
      0
      1
      1
      0
      1
      0

      123
    
      0
      0
      1
      0
      0
      1
      2
      1

      456
    
      0
      1
      0
      1
      1
      0
      3
      2

      lk jfd
    
  </div>

  <!-- unit 11 -->
  <div id="unit11">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=__first__%}
      {%TMPL_VAR NAME=__last__%}
      {%TMPL_VAR NAME=__inner__%}
      {%TMPL_VAR NAME=__outer__%}
      {%TMPL_VAR NAME=__odd__%}
      {%TMPL_VAR NAME=__even__%}
      {%TMPL_VAR NAME=__counter__%}
      {%TMPL_VAR NAME=__index__%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit11_res">
    
      1
      0
      0
      1
      1
      0
      1
      0
    
      0
      1
      0
      1
      0
      1
      2
      1
    
  </div>

  <!-- unit 12 -->
  <div id="unit12">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=__first__%}
      {%TMPL_VAR NAME=__last__%}
      {%TMPL_VAR NAME=__inner__%}
      {%TMPL_VAR NAME=__outer__%}
      {%TMPL_VAR NAME=__odd__%}
      {%TMPL_VAR NAME=__even__%}
      {%TMPL_VAR NAME=__counter__%}
      {%TMPL_VAR NAME=__index__%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit12_res">
    
      1
      1
      0
      1
      1
      0
      1
      0
    
  </div>

  <!-- unit 13 -->
  <div id="unit13">
    {%TMPL_IF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
    {%/TMPL_IF%}
    {%TMPL_IF NAME=show_var2%}
      {%TMPL_VAR NAME=var2%}
    {%/TMPL_IF%}
  </div>
  <div id="unit13_res">
    
      123
    
    
  </div>

  <!-- unit 14 -->
  <div id="unit14">
    {%TMPL_IF NAME=var2%}
      {%TMPL_VAR NAME=var1%}
    {%TMPL_ELSE%}
      {%TMPL_VAR NAME=var3%}
    {%/TMPL_IF%}
  </div>
  <div id="unit14_res">
    
      test
    
  </div>

  <!-- unit 15 -->
  <div id="unit15">
    {%TMPL_IF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
    {%TMPL_ELSE%}
      without var1
    {%/TMPL_IF%}
    {%TMPL_IF NAME=show_var2%}
      {%TMPL_VAR NAME=var2%}
    {%TMPL_ELSE%}
      without var2
    {%/TMPL_IF%}
  </div>
  <div id="unit15_res">
    
      123
    
    
      without var2
    
  </div>

  <!-- unit 16 -->
  <div id="unit16">
    {%TMPL_UNLESS NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS NAME=show_var2%}
      {%TMPL_VAR NAME=var2%}
    {%/TMPL_UNLESS%}
  </div>
  <div id="unit16_res">
    
    
      test
    
  </div>

  <!-- unit 17 -->
  <div id="unit17">
    {%TMPL_UNLESS NAME=var2%}
      {%TMPL_VAR NAME=var1%}
    {%TMPL_ELSE%}
      {%TMPL_VAR NAME=var3%}
    {%/TMPL_UNLESS%}
  </div>
  <div id="unit17_res">
    
      123
    
  </div>

  <!-- unit 18 -->
  <div id="unit18">
    {%TMPL_UNLESS NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
    {%TMPL_ELSE%}
      without var1
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS NAME=show_var2%}
      {%TMPL_VAR NAME=var2%}
    {%TMPL_ELSE%}
      without var2
    {%/TMPL_UNLESS%}
  </div>
  <div id="unit18_res">
    
      without var1
    
    
      test
    
  </div>

  <!-- unit 19 -->
  <div id="unit19"><!--
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var2%}
    {%/TMPL_LOOP%}
  --></div>
  <div id="unit19_res">
    
      123
      pooiu 
    
  </div>

  <!-- unit 20 -->
  <div id="unit20">
    <!--
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var2%}
    {%/TMPL_LOOP%}
    -->
  </div>
  <div id="unit20_res">
    
      123
      pooiu 
    
    </div>

  <!-- unit 21 -->
  <div id="unit21">
    {%Tmpl_LooP NAMe=loop1%}
      {%Tmpl_iF Name=var1%}
        {%tmpl_var name=var1%}
      {%Tmpl_elsE%}
        ee
      {%/tmpL_if%}
      {%tmpl_unlESS NaME=var2%}
        ff
      {%TMPL_else%}
        {%tmpl_VAR NamE=var2%}
      {%/tmpl_unless%}
    {%/TmpL_LOOp%}
  </div>
  <div id="unit21_res">
    
      
        123
      
      
        pooiu 
      
    
  </div>

  <!-- unit 22 -->
  <div id="unit22">
    <!--%TMPL_LOOP NAME=loop1%-->
      <!--%TMPL_IF NAME=var1%-->
        <!--%TMPL_VAR NAME=var1%-->
      <!--%TMPL_ELSE%-->
        ee
      <!--%/TMPL_IF%-->
      <!--%TMPL_UNLESS NAME=var2%-->
        ff
      <!--%TMPL_ELSE%-->
        <!--%TMPL_VAR NAME=var2%-->
      <!--%/TMPL_UNLESS%-->
    <!--%/TMPL_LOOP%-->
  </div>
  <div id="unit22_res">
    
      
        123
      
      
        pooiu 
      
    
  </div>

  <!-- unit 23 -->
  <div id="unit23">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var3%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit23_res">
  </div>

  <!-- unit 24 -->
  <div id="unit24">
    {%TMPL_LOOP NAME=loop2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_VAR NAME=var3%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit24_res">
  </div>

  <!-- unit 25 -->
  <div id="unit25">
    {%TMPL_LOOP NAME=loop1%}
      {%TMPL_IF NAME=var3%}
        {%TMPL_VAR NAME=var1%}
      {%/TMPL_IF%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit25_res">
  </div>

  <!-- unit 26 -->
  <div id="unit26">
    {%TmPl_loop NAME=loop1%}
      {%tmpl_if NAME=var1%}
        {%tmpl_Var NAME=var2%}
      {%/Tmpl_If%}
    {%/Tmpl_LoOp%}
  </div>
  <div id="unit26_res">
    
      
        pooiu 
      
    
  </div>

  <!-- unit 27 -->
  <div id="unit27">
    {%TMPL_VAR   NAME=var1%}
    {%TMPL_VAR  DEFAULT=ee      NAME=var2%}
    {%TMPL_VAR    DEFAULT=ee        NAME=var3%}
  </div>
  <div id="unit27_res">
    tt
    qq
    ee
  </div>

  <!-- unit 28 -->
  <div id="unit28">
    {%TMPL_LOOP    NAME=loop1%}
      {%TMPL_VAR NAME=var1%}
    {%/TMPL_LOOP%}
  </div>
  <div id="unit28_res">
    
      123
    
  </div>

  <!-- unit 29 -->
  <div id="unit29">
    {%TMPL_IF    NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
    {%/TMPL_IF%}
    {%TMPL_IF     NAME=show_var2%}
      {%TMPL_VAR NAME=var2%}
    {%/TMPL_IF%}
  </div>
  <div id="unit29_res">
    
      123
    
    
  </div>

  <!-- unit 30 -->
  <div id="unit30">
    {%TMPL_UNLESS    NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS     NAME=show_var2%}
      {%TMPL_VAR NAME=var2%}
    {%/TMPL_UNLESS%}
  </div>
  <div id="unit30_res">
    
    
      test
    
  </div>

  <!-- unit 31 -->
  <div id="unit31">
    {%TMPL_VAR  NAME="var1"%}
    {%TMPL_VAR  DEFAULT="ee  "    NAME="var2"%}
    {%TMPL_VAR    DEFAULT="ee j"       NAME=var3%}
  </div>
  <div id="unit31_res">
    tt
    qq
    ee j
  </div>

  <!-- unit 32 -->
  <div id="unit32">
    <input name="{%TMPL_VAR NAME=var1%}" value="d"/>
  </div>
  <div id="unit32_res">
    <input name="name1" value="d"/>
  </div>

  <!-- unit 33 -->
  <div id="unit33">
    <select>
      {%TMPL_LOOP NAME=loop1%}
      <option value="{%TMPL_VAR NAME=var1%}">{%TMPL_VAR NAME=var2%}</option>
      {%/TMPL_LOOP%}
    </select>
  </div>
  <div id="unit33_res">
    <select>
      
      <option value="1">a1</option>
      
      <option value="2">a2</option>
      
    </select>
  </div>

  <!-- unit 34 -->
  <div id="unit34">
    <table>
      <tbody>
      {%TMPL_LOOP NAME=loop1%}
      <tr>
        {%TMPL_LOOP NAME=loop2%}
        <td>{%TMPL_VAR NAME=var1%}</td>
        {%/TMPL_LOOP%}
      </tr>
      {%/TMPL_LOOP%}
      </tbody>
    </table>
  </div>
  <div id="unit34_res">
    
      
      
        
        
        
        
        
      
      
      
        
        
        
        
        
      
      
      <table>
      <tbody><tr><td></td></tr></tbody>
    </table>
  </div>

  <!-- unit 35 -->
  <div id="unit35"><!--
    <table>
      <tbody>
      {%TMPL_LOOP NAME=loop1%}
      <tr>
        {%TMPL_LOOP NAME=loop2%}
        <td>{%TMPL_VAR NAME=var1%}</td>
        {%/TMPL_LOOP%}
      </tr>
      {%/TMPL_LOOP%}
      </tbody>
    </table>
  --></div>
  <div id="unit35_res">
    <table>
      <tbody>
      
      <tr>
        
        <td>a1</td>
        
        <td>a2</td>
        
      </tr>
      
      <tr>
        
        <td>b1</td>
        
        <td>b2</td>
        
      </tr>
      
      </tbody>
    </table>
  </div>

  <!-- unit 36 -->
  <div id="unit36">
    {%TMPL_IFDEF NAME=var1%}test{%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=var2%}test{%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=var3%}test{%/TMPL_IFDEF%}
  </div>
  <div id="unit36_res">
    test
    test
    
  </div>

  <!-- unit 37 -->
  <div id="unit37">
    {%TMPL_IFDEF NAME=var1%}test{%TMPL_ELSE%}here{%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=var2%}test{%TMPL_ELSE%}here{%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=var3%}test{%TMPL_ELSE%}here{%/TMPL_IFDEF%}
  </div>
  <div id="unit37_res">
    test
    test
    here
  </div>

  <!-- unit 38 -->
  <div id="unit38">
    {%TMPL_IFNDEF NAME=var1%}test{%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=var2%}test{%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=var3%}test{%/TMPL_IFNDEF%}
  </div>
  <div id="unit38_res">
    
    
    test
  </div>

  <!-- unit 39 -->
  <div id="unit39">
    {%TMPL_IFNDEF NAME=var1%}test{%TMPL_ELSE%}here{%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=var2%}test{%TMPL_ELSE%}here{%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=var3%}test{%TMPL_ELSE%}here{%/TMPL_IFNDEF%}
  </div>
  <div id="unit39_res">
    here
    here
    test
  </div>

  <!-- unit 40 -->
  <div id="unit40">
    {%TMPL_IF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IF%}
    {%/TMPL_IF%}
    {%TMPL_IF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IF%}
    {%/TMPL_IF%}
    {%TMPL_IF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IF%}
    {%/TMPL_IF%}
    {%TMPL_IF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IF NAME=show_var12%}
        with var21
      {%TMPL_ELSE%}
        without var21
      {%/TMPL_IF%}
    {%/TMPL_IF%}
  </div>
  <div id="unit40_res">
    
      123
      
        with var11
      
    
    
      123
      
        without var12
      
    
    
      without var2
      
        with var11
      
    
    
      without var2
      
        without var21
      
    
  </div>

  <!-- unit 41 -->
  <div id="unit41">
    {%TMPL_UNLESS NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_UNLESS NAME=show_var11%}
        without var11
      {%TMPL_ELSE%}
        with var11
      {%/TMPL_UNLESS%}
    {%TMPL_ELSE%}
      with var1
      {%TMPL_UNLESS NAME=show_var11%}
        without var11
      {%TMPL_ELSE%}
        with var11
      {%/TMPL_UNLESS%}
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_UNLESS NAME=show_var12%}
        without var12
      {%TMPL_ELSE%}
        with var12
      {%/TMPL_UNLESS%}
    {%TMPL_ELSE%}
      with var1
      {%TMPL_UNLESS NAME=show_var11%}
        without var11
      {%TMPL_ELSE%}
        with var11
      {%/TMPL_UNLESS%}
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_UNLESS NAME=show_var12%}
        without var12
      {%TMPL_ELSE%}
        with var12
      {%/TMPL_UNLESS%}
    {%TMPL_ELSE%}
      with var2
      {%TMPL_UNLESS NAME=show_var11%}
        without var11
      {%TMPL_ELSE%}
        with var11
      {%/TMPL_UNLESS%}
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_UNLESS NAME=show_var12%}
        without var12
      {%TMPL_ELSE%}
        with var12
      {%/TMPL_UNLESS%}
    {%TMPL_ELSE%}
      with var2
      {%TMPL_UNLESS NAME=show_var12%}
        without var21
      {%TMPL_ELSE%}
        with var21
      {%/TMPL_UNLESS%}
    {%/TMPL_UNLESS%}
  </div>
  <div id="unit41_res">
    
      123
      
        without var11
      
    
    
      123
      
        with var12
      
    
    
      with var2
      
        without var11
      
    
    
      with var2
      
        with var21
      
    
  </div>

  <!-- unit 42 -->
  <div id="unit42">
    {%TMPL_IF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_UNLESS NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_UNLESS%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_UNLESS NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_UNLESS%}
    {%/TMPL_IF%}
    {%TMPL_IF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_UNLESS NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_UNLESS%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_UNLESS NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_UNLESS%}
    {%/TMPL_IF%}
    {%TMPL_IF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_UNLESS NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_UNLESS%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_UNLESS NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_UNLESS%}
    {%/TMPL_IF%}
    {%TMPL_IF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_UNLESS NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_UNLESS%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_UNLESS NAME=show_var12%}
        with var21
      {%TMPL_ELSE%}
        without var21
      {%/TMPL_UNLESS%}
    {%/TMPL_IF%}
  </div>
  <div id="unit42_res">
    
      123
      
        without var11
      
    
    
      123
      
        with var12
      
    
    
      without var2
      
        without var11
      
    
    
      without var2
      
        with var21
      
    
  </div>

  <!-- unit 43 -->
  <div id="unit43">
    {%TMPL_UNLESS NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IF%}
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IF%}
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IF%}
    {%/TMPL_UNLESS%}
    {%TMPL_UNLESS NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IF%}
    {%/TMPL_UNLESS%}
  </div>
  <div id="unit43_res">
    
      without var1
      
        with var11
      
    
    
      without var1
      
        without var12
      
    
    
      123
      
        with var11
      
    
    
      123
      
        without var12
      
    
  </div>

  <!-- unit 44 -->
  <div id="unit44">
    {%TMPL_IFDEF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFDEF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IFDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFDEF%}
    {%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFDEF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IFDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFDEF%}
    {%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFDEF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IFDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFDEF%}
    {%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFDEF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IFDEF NAME=show_var12%}
        with var21
      {%TMPL_ELSE%}
        without var21
      {%/TMPL_IFDEF%}
    {%/TMPL_IFDEF%}
  </div>
  <div id="unit44_res">
    
      123
      
        with var11
      
    
    
      123
      
        without var12
      
    
    
      without var2
      
        with var11
      
    
    
      without var2
      
        without var21
      
    
  </div>

  <!-- unit 45 -->
  <div id="unit45">
    {%TMPL_IFNDEF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFNDEF NAME=show_var11%}
        without var11
      {%TMPL_ELSE%}
        with var11
      {%/TMPL_IFNDEF%}
    {%TMPL_ELSE%}
      with var1
      {%TMPL_IFNDEF NAME=show_var11%}
        without var11
      {%TMPL_ELSE%}
        with var11
      {%/TMPL_IFNDEF%}
    {%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFNDEF NAME=show_var12%}
        without var12
      {%TMPL_ELSE%}
        with var12
      {%/TMPL_IFNDEF%}
    {%TMPL_ELSE%}
      with var1
      {%TMPL_IFNDEF NAME=show_var11%}
        without var11
      {%TMPL_ELSE%}
        with var11
      {%/TMPL_IFNDEF%}
    {%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFNDEF NAME=show_var12%}
        without var12
      {%TMPL_ELSE%}
        with var12
      {%/TMPL_IFNDEF%}
    {%TMPL_ELSE%}
      with var2
      {%TMPL_IFNDEF NAME=show_var11%}
        without var11
      {%TMPL_ELSE%}
        with var11
      {%/TMPL_IFNDEF%}
    {%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFNDEF NAME=show_var12%}
        without var12
      {%TMPL_ELSE%}
        with var12
      {%/TMPL_IFNDEF%}
    {%TMPL_ELSE%}
      with var2
      {%TMPL_IFNDEF NAME=show_var12%}
        without var21
      {%TMPL_ELSE%}
        with var21
      {%/TMPL_IFNDEF%}
    {%/TMPL_IFNDEF%}
  </div>
  <div id="unit45_res">
    
      123
      
        without var11
      
    
    
      123
      
        with var12
      
    
    
      with var2
      
        without var11
      
    
    
      with var2
      
        with var21
      
    
  </div>

  <!-- unit 46 -->
  <div id="unit46">
    {%TMPL_IFDEF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFNDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFNDEF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IFNDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFNDEF%}
    {%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFNDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFNDEF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IFNDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFNDEF%}
    {%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFNDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFNDEF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IFNDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFNDEF%}
    {%/TMPL_IFDEF%}
    {%TMPL_IFDEF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFNDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFNDEF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IFNDEF NAME=show_var12%}
        with var21
      {%TMPL_ELSE%}
        without var21
      {%/TMPL_IFNDEF%}
    {%/TMPL_IFDEF%}
  </div>
  <div id="unit46_res">
    
      123
      
        without var11
      
    
    
      123
      
        with var12
      
    
    
      without var2
      
        without var11
      
    
    
      without var2
      
        with var21
      
    
  </div>

  <!-- unit 47 -->
  <div id="unit47">
    {%TMPL_IFNDEF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFDEF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IFDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFDEF%}
    {%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=show_var1%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFDEF%}
    {%TMPL_ELSE%}
      without var1
      {%TMPL_IFDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFDEF%}
    {%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFDEF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IFDEF NAME=show_var11%}
        with var11
      {%TMPL_ELSE%}
        without var11
      {%/TMPL_IFDEF%}
    {%/TMPL_IFNDEF%}
    {%TMPL_IFNDEF NAME=show_var2%}
      {%TMPL_VAR NAME=var1%}
      {%TMPL_IFDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFDEF%}
    {%TMPL_ELSE%}
      without var2
      {%TMPL_IFDEF NAME=show_var12%}
        with var12
      {%TMPL_ELSE%}
        without var12
      {%/TMPL_IFDEF%}
    {%/TMPL_IFNDEF%}
  </div>
  <div id="unit47_res">
    
      without var1
      
        with var11
      
    
    
      without var1
      
        without var12
      
    
    
      123
      
        with var11
      
    
    
      123
      
        without var12
      
    
  </div>

  <!-- unit 48 -->
  <div id="unit48"><div>
    another
    {%TMPL_VAR NAME=var1%}
    text
  </div></div>
  <div id="unit48_res"><div>
    another
    1
    text
  </div></div>

  <!-- unit 49 -->
  <div id="unit49">
    <div>
    another
    {%TMPL_VAR NAME=var1%}
    text
    </div>
  </div>
  <div id="unit49_res">
    <div>
    another
    1
    text
    </div>
  </div>

  <!-- unit 50 -->
  <div id="unit50">
    <div>
    another
    {%TMPL_VAR NAME=var1%}
    text
    </div>
  </div>
  <div id="unit50_res"><div>
    another
    1
    text
    </div></div>

  <!-- unit 51 -->
  <table id="unit51">
    <tbody>
      <tr>
	<td>
	  another
	  {%TMPL_VAR NAME=var1%}
	  text
	</td>
      </tr>
    </tbody>
  </table>
  <table id="unit51_res"><tbody>
      <tr>
	<td>
	  another
	  1
	  text
	</td>
      </tr>
    </tbody></table>

  <!-- unit 52 -->
  <table id="unit52">
    <thead>
      <tr>
	<td>
	  another
	  {%TMPL_VAR NAME=var1%}
	  text
	</td>
      </tr>
    </thead>
  </table>
  <table id="unit52_res"><thead>
      <tr>
	<td>
	  another
	  1
	  text
	</td>
      </tr>
    </thead></table>
    
  <!-- unit 53 -->
  <table id="unit53">
    <tfoot>
      <tr>
	<td>
	  another
	  {%TMPL_VAR NAME=var1%}
	  text
	</td>
      </tr>
    </tfoot>
  </table>
  <table id="unit53_res"><tfoot>
      <tr>
	<td>
	  another
	  1
	  text
	</td>
      </tr>
    </tfoot></table>
    
  <!-- unit 54 -->
  <table>
    <tbody id="unit54">
      <tr>
	<td>
	  another
	  {%TMPL_VAR NAME=var1%}
	  text
	</td>
      </tr>
    </tbody>
  </table>
  <table>
    <tbody id="unit54_res"><tr>
	<td>
	  another
	  1
	  text
	</td>
      </tr></tbody>
  </table>

  <!-- unit 55 -->
  <table>
    <tbody>
      <tr id="unit55">
	<th>
	  another
	  {%TMPL_VAR NAME=var1%}
	  text
	</th>
      </tr>
    </tbody>
  </table>
  <table>
    <tbody>
      <tr id="unit55_res"><th>
	  another
	  1
	  text
	</th></tr>
    </tbody>
  </table>

  <!-- unit 56 -->
  <table>
    <tbody>
      <tr id="unit56">
	<td>
	  another
	  {%TMPL_VAR NAME=var1%}
	  text
	</td>
      </tr>
    </tbody>
  </table>
  <table>
    <tbody>
      <tr id="unit56_res"><td>
	  another
	  1
	  text
	</td></tr>
    </tbody>
  </table>

  <!-- unit 57 -->
  <table id="unit57">
    <!--
    <TBODY>
      <tr>
	<td>
	  another
	  {%TMPL_VAR NAME=var1%}
	  text
	</td>
      </tr>
    </TBODY>
    -->
  </table>
  <table id="unit57_res"><tbody>
      <tr>
	<td>
	  another
	  1
	  text
	</td>
      </tr>
    </tbody></table>

  <!-- unit 58 -->
  <table id="unit58">
    <!--
    <tBoDy>
      <tr>
	<td>
	  another
	  {%TMPL_VAR NAME=var1%}
	  text
	</td>
      </tr>
    </tBoDy>
    -->
  </table>
  <table id="unit58_res"><tbody>
      <tr>
	<td>
	  another
	  1
	  text
	</td>
      </tr>
    </tbody></table>

  <!-- unit 59 -->
  <div id="unit59">
    {%TMPL_IFEQ NAME=var1 VALUE=1%}test{%/TMPL_IFEQ%}
    {%TMPL_IFEQ NAME=var2 VALUE=2%}test{%/TMPL_IFEQ%}
  </div>
  <div id="unit59_res">
    test
    
  </div>

  <!-- unit 60 -->
  <div id="unit60">
    {%TMPL_IFEQ NAME=var1 VALUE=2%}test{%/TMPL_IFEQ%}
    {%TMPL_IFEQ NAME=var2 VALUE=2%}test{%/TMPL_IFEQ%}
  </div>
  <div id="unit60_res">
    
    
  </div>

  <!-- unit 61 -->
  <div id="unit61">
    {%TMPL_IFEQ NAME=var1 VALUE=1%}test{%TMPL_ELSE%}here{%/TMPL_IFEQ%}
    {%TMPL_IFEQ NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFEQ%}
  </div>
  <div id="unit61_res">
    test
    here
  </div>

  <!-- unit 62 -->
  <div id="unit62">
    {%TMPL_IFEQ NAME=var1 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFEQ%}
    {%TMPL_IFEQ NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFEQ%}
  </div>
  <div id="unit62_res">
    here
    here
  </div>

  <!-- unit 63 -->
  <div id="unit63">
    {%TMPL_IFEQ NAME=var1 WITH=var2%}test{%/TMPL_IFEQ%}
    {%TMPL_IFEQ NAME=var2 WITH=var1%}test{%/TMPL_IFEQ%}
  </div>
  <div id="unit63_res">
    test
    test
  </div>

  <!-- unit 64 -->
  <div id="unit64">
    {%TMPL_IFEQ NAME=var1 WITH=var2%}test{%/TMPL_IFEQ%}
    {%TMPL_IFEQ NAME=var2 WITH=var1%}test{%/TMPL_IFEQ%}
  </div>
  <div id="unit64_res">
    
    
  </div>

  <!-- unit 65 -->
  <div id="unit65">
    {%TMPL_IFEQ NAME=var1 WITH=var2%}test{%TMPL_ELSE%}here{%/TMPL_IFEQ%}
    {%TMPL_IFEQ NAME=var2 WITH=var1%}test{%TMPL_ELSE%}here{%/TMPL_IFEQ%}
  </div>
  <div id="unit65_res">
    test
    test
  </div>

  <!-- unit 66 -->
  <div id="unit66">
    {%TMPL_IFEQ NAME=var1 WITH=var2%}test{%TMPL_ELSE%}here{%/TMPL_IFEQ%}
    {%TMPL_IFEQ NAME=var2 WITH=var1%}test{%TMPL_ELSE%}here{%/TMPL_IFEQ%}
  </div>
  <div id="unit66_res">
    here
    here
  </div>

  <!-- unit 67 -->
  <div id="unit67">
    {%TMPL_IFNEQ NAME=var1 VALUE=1%}test{%/TMPL_IFNEQ%}
    {%TMPL_IFNEQ NAME=var2 VALUE=2%}test{%/TMPL_IFNEQ%}
  </div>
  <div id="unit67_res">
    
    test
  </div>

  <!-- unit 68 -->
  <div id="unit68">
    {%TMPL_IFNEQ NAME=var1 VALUE=1%}test{%/TMPL_IFNEQ%}
    {%TMPL_IFNEQ NAME=var2 VALUE=2%}test{%/TMPL_IFNEQ%}
  </div>
  <div id="unit68_res">
    
    test
  </div>

  <!-- unit 69 -->
  <div id="unit69">
    {%TMPL_IFNEQ NAME=var1 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFNEQ%}
    {%TMPL_IFNEQ NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFNEQ%}
  </div>
  <div id="unit69_res">
    test
    test
  </div>

  <!-- unit 70 -->
  <div id="unit70">
    {%TMPL_IFNEQ NAME=var1 VALUE=1%}test{%TMPL_ELSE%}here{%/TMPL_IFNEQ%}
    {%TMPL_IFNEQ NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFNEQ%}
  </div>
  <div id="unit70_res">
    here
    test
  </div>

  <!-- unit 71 -->
  <div id="unit71">
    {%TMPL_IFNEQ NAME=var1 WITH=var2%}test{%/TMPL_IFNEQ%}
    {%TMPL_IFNEQ NAME=var2 WITH=var1%}test{%/TMPL_IFNEQ%}
  </div>
  <div id="unit71_res">
    test
    test
  </div>

  <!-- unit 72 -->
  <div id="unit72">
    {%TMPL_IFNEQ NAME=var1 WITH=var2%}test{%/TMPL_IFNEQ%}
    {%TMPL_IFNEQ NAME=var2 WITH=var1%}test{%/TMPL_IFNEQ%}
  </div>
  <div id="unit72_res">
    
    
  </div>

  <!-- unit 73 -->
  <div id="unit73">
    {%TMPL_IFNEQ NAME=var1 WITH=var2%}test{%TMPL_ELSE%}here{%/TMPL_IFNEQ%}
    {%TMPL_IFNEQ NAME=var2 WITH=var1%}test{%TMPL_ELSE%}here{%/TMPL_IFNEQ%}
  </div>
  <div id="unit73_res">
    test
    test
  </div>

  <!-- unit 74 -->
  <div id="unit74">
    {%TMPL_IFNEQ NAME=var1 WITH=var2%}test{%TMPL_ELSE%}here{%/TMPL_IFNEQ%}
    {%TMPL_IFNEQ NAME=var2 WITH=var1%}test{%TMPL_ELSE%}here{%/TMPL_IFNEQ%}
  </div>
  <div id="unit74_res">
    here
    here
  </div>

  <!-- unit 75 -->
  <div id="unit75">
    {%TMPL_IFGT NAME=var1 VALUE=4%}test{%/TMPL_IFGT%}
    {%TMPL_IFGT NAME=var2 VALUE=2%}test{%/TMPL_IFGT%}
  </div>
  <div id="unit75_res">
    test
    
  </div>

  <!-- unit 76 -->
  <div id="unit76">
    {%TMPL_IFGT NAME=var1 VALUE=5%}test{%/TMPL_IFGT%}
    {%TMPL_IFGT NAME=var2 VALUE=2%}test{%/TMPL_IFGT%}
  </div>
  <div id="unit76_res">
    
    
  </div>

  <!-- unit 77 -->
  <div id="unit77">
    {%TMPL_IFGT NAME=var1 VALUE=4%}test{%TMPL_ELSE%}here{%/TMPL_IFGT%}
    {%TMPL_IFGT NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFGT%}
  </div>
  <div id="unit77_res">
    test
    here
  </div>

  <!-- unit 78 -->
  <div id="unit78">
    {%TMPL_IFGT NAME=var1 VALUE=5%}test{%TMPL_ELSE%}here{%/TMPL_IFGT%}
    {%TMPL_IFGT NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFGT%}
  </div>
  <div id="unit78_res">
    here
    here
  </div>

  <!-- unit 79 -->
  <div id="unit79">
    {%TMPL_IFGE NAME=var1 VALUE=5%}test{%/TMPL_IFGE%}
    {%TMPL_IFGE NAME=var2 VALUE=2%}test{%/TMPL_IFGE%}
  </div>
  <div id="unit79_res">
    test
    
  </div>

  <!-- unit 80 -->
  <div id="unit80">
    {%TMPL_IFGE NAME=var1 VALUE=6%}test{%/TMPL_IFGE%}
    {%TMPL_IFGE NAME=var2 VALUE=2%}test{%/TMPL_IFGE%}
  </div>
  <div id="unit80_res">
    
    
  </div>

  <!-- unit 81 -->
  <div id="unit81">
    {%TMPL_IFGE NAME=var1 VALUE=5%}test{%TMPL_ELSE%}here{%/TMPL_IFGE%}
    {%TMPL_IFGE NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFGE%}
  </div>
  <div id="unit81_res">
    test
    here
  </div>

  <!-- unit 82 -->
  <div id="unit82">
    {%TMPL_IFGE NAME=var1 VALUE=6%}test{%TMPL_ELSE%}here{%/TMPL_IFGE%}
    {%TMPL_IFGE NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFGE%}
  </div>
  <div id="unit82_res">
    here
    here
  </div>

  <!-- unit 83 -->
  <div id="unit83">
    {%TMPL_IFLT NAME=var1 VALUE=6%}test{%/TMPL_IFLT%}
    {%TMPL_IFLT NAME=var2 VALUE=2%}test{%/TMPL_IFLT%}
  </div>
  <div id="unit83_res">
    test
    
  </div>

  <!-- unit 84 -->
  <div id="unit84">
    {%TMPL_IFLT NAME=var1 VALUE=5%}test{%/TMPL_IFLT%}
    {%TMPL_IFLT NAME=var2 VALUE=2%}test{%/TMPL_IFLT%}
  </div>
  <div id="unit84_res">
    
    
  </div>

  <!-- unit 85 -->
  <div id="unit85">
    {%TMPL_IFLT NAME=var1 VALUE=6%}test{%TMPL_ELSE%}here{%/TMPL_IFLT%}
    {%TMPL_IFLT NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFLT%}
  </div>
  <div id="unit85_res">
    test
    here
  </div>

  <!-- unit 86 -->
  <div id="unit86">
    {%TMPL_IFLT NAME=var1 VALUE=5%}test{%TMPL_ELSE%}here{%/TMPL_IFLT%}
    {%TMPL_IFLT NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFLT%}
  </div>
  <div id="unit86_res">
    here
    here
  </div>

  <!-- unit 87 -->
  <div id="unit87">
    {%TMPL_IFLE NAME=var1 VALUE=5%}test{%/TMPL_IFLE%}
    {%TMPL_IFLE NAME=var2 VALUE=2%}test{%/TMPL_IFLE%}
  </div>
  <div id="unit87_res">
    test
    
  </div>

  <!-- unit 88 -->
  <div id="unit88">
    {%TMPL_IFLE NAME=var1 VALUE=4%}test{%/TMPL_IFLE%}
    {%TMPL_IFLE NAME=var2 VALUE=2%}test{%/TMPL_IFLE%}
  </div>
  <div id="unit88_res">
    
    
  </div>

  <!-- unit 89 -->
  <div id="unit89">
    {%TMPL_IFLE NAME=var1 VALUE=7%}test{%TMPL_ELSE%}here{%/TMPL_IFLE%}
    {%TMPL_IFLE NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFLE%}
  </div>
  <div id="unit89_res">
    test
    here
  </div>

  <!-- unit 90 -->
  <div id="unit90">
    {%TMPL_IFLE NAME=var1 VALUE=4%}test{%TMPL_ELSE%}here{%/TMPL_IFLE%}
    {%TMPL_IFLE NAME=var2 VALUE=2%}test{%TMPL_ELSE%}here{%/TMPL_IFLE%}
  </div>
  <div id="unit90_res">
    here
    here
  </div>

  <!-- unit 91 -->
  <div id="unit91">
    {%this {% is{%%}
    correct %} template
  </div>
  <div id="unit91_res">
    {%this {% is{%%}
    correct %} template
  </div>

  <!-- unit 92 -->
  <div id="unit92">{%TMPL_VAR NAME=var1%}{%TMPL_VAR NAME=var2%}</div>
  <div id="unit92_res">12</div>

  <!-- unit 93 -->
  <div id="unit93">{%TMPL_VAR NAME=var1%}{%TMPL_VAR NAME=var2%}</div>
  <div id="unit93_res">12</div>

  <!-- unit 94 -->
  <div id="unit94">{%TMPL_LIST NAME=list1%}{%/TMPL_LIST%}</div>
  <div id="unit94_res"></div>

  <!-- unit 95 -->
  <div id="unit95">{%TMPL_LIST NAME=list1%}{%/TMPL_LIST%}</div>
  <div id="unit95_res"></div>

  <!-- unit 96 -->
  <div id="unit96">{%TMPL_LIST NAME=list1%}q{%/TMPL_LIST%}</div>
  <div id="unit96_res"></div>

  <!-- unit 97 -->
  <div id="unit97">{%TMPL_LIST NAME=list1%}
    q
  {%/TMPL_LIST%}</div>
  <div id="unit97_res">
    q
  
    q
  
    q
  </div>

  <!-- unit 98 -->
  <div id="unit98">{%TMPL_LIST NAME=list1%}{%TMPL_LISTITEM%}{%/TMPL_LIST%}</div>
  <div id="unit98_res">123</div>

  <!-- unit 99 -->
  <div id="unit99">{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a
  {%/TMPL_LIST%}</div>
  <div id="unit99_res">
    q1a
  
    q2a
  
    q3a
  </div>

  <!-- unit 100 -->
  <div id="unit100">{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a
  {%/TMPL_LIST%}</div>
  <div id="unit100_res">
    q1a
  
    qworda
  
    q3a
  
    qagaina
  </div>

  <!-- unit 101 -->
  <div id="unit101">{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a{%TMPL_LISTITEM%}
  {%/TMPL_LIST%}</div>
  <div id="unit101_res">
    q1a1
  
    qwordaword
  
    q3a3
  
    qagainaagain
  </div>

  <!-- unit 102 -->
  <div id="unit102">{%TMPL_LISTITEM%}{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a{%TMPL_LISTITEM%}
  {%/TMPL_LIST%}</div>
  <div id="unit102_res">
    q1a1
  
    qwordaword
  
    q3a3
  
    qagainaagain
  </div>

  <!-- unit 103 -->
  <div id="unit103">{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a{%TMPL_VAR NAME=w%}
  {%/TMPL_LIST%}</div>
  <div id="unit103_res">
    q1a
  
    qworda
  
    q3a
  </div>

  <!-- unit 104 -->
  <div id="unit104">{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a{%TMPL_VAR NAME=w%}
  {%/TMPL_LIST%}</div>
  <div id="unit104_res">
    q1aT
  
    qwordaT
  
    q3aT
  </div>

  <!-- unit 105 -->
  <div id="unit105">{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a{%TMPL_VAR NAME=w%}
    {%TMPL_VAR NAME=__first__%}
    {%TMPL_VAR NAME=__last__%}
    {%TMPL_VAR NAME=__inner__%}
    {%TMPL_VAR NAME=__outer__%}
    {%TMPL_VAR NAME=__odd__%}
    {%TMPL_VAR NAME=__even__%}
    {%TMPL_VAR NAME=__counter__%}
    {%TMPL_VAR NAME=__index__%}
  {%/TMPL_LIST%}</div>
  <div id="unit105_res">
    q1a
    1
    0
    0
    1
    1
    0
    1
    0
  
    qworda
    0
    0
    1
    0
    0
    1
    2
    1
  
    q3a
    0
    1
    0
    1
    1
    0
    3
    2
  </div>

  <!-- unit 106 -->
  <div id="unit106">{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a{%TMPL_VAR NAME=w%}
    {%TMPL_VAR NAME=__first__%}
    {%TMPL_VAR NAME=__last__%}
    {%TMPL_VAR NAME=__inner__%}
    {%TMPL_VAR NAME=__outer__%}
    {%TMPL_VAR NAME=__odd__%}
    {%TMPL_VAR NAME=__even__%}
    {%TMPL_VAR NAME=__counter__%}
    {%TMPL_VAR NAME=__index__%}
  {%/TMPL_LIST%}</div>
  <div id="unit106_res">
    q1a
    1
    0
    0
    1
    1
    0
    1
    0
  
    qworda
    0
    1
    0
    1
    0
    1
    2
    1
  </div>

  <!-- unit 107 -->
  <div id="unit107">{%TMPL_LIST NAME=list1%}
    q{%TMPL_LISTITEM%}a{%TMPL_VAR NAME=w%}
    {%TMPL_VAR NAME=__first__%}
    {%TMPL_VAR NAME=__last__%}
    {%TMPL_VAR NAME=__inner__%}
    {%TMPL_VAR NAME=__outer__%}
    {%TMPL_VAR NAME=__odd__%}
    {%TMPL_VAR NAME=__even__%}
    {%TMPL_VAR NAME=__counter__%}
    {%TMPL_VAR NAME=__index__%}
  {%/TMPL_LIST%}</div>
  <div id="unit107_res">
    q1a
    1
    1
    0
    1
    1
    0
    1
    0
  </div>

  <!-- unit 108 -->
  <div id="unit108">{%TMPL_VAR NAME=v1 DEFAULT='q \' f'%}</div>
  <div id="unit108_res">q ' f</div>

  <!-- unit 109 -->
  <div id="unit109">{%TMPL_VAR NAME=v1 DEFAULT="q \"f \""%}</div>
  <div id="unit109_res">q "f "</div>

  <!-- unit 110 -->
  <div id="unit110">q{%TMPL_VAR NAME=var1 ESCAPE=ETEXT%}a</div>
  <div id="unit110_res"></div>

  <!-- unit 110.1 -->
  <div id="unit110.1">q{%TMPL_VAR NAME=var1 EsCaPE=eTeXt%}a</div>
  <div id="unit110.1_res"></div>

  <!-- unit 111 -->
  <div id="unit111">q{%TMPL_VAR NAME=var1 ESCAPE=AVAL%}a</div>
  <div id="unit111_res"></div>

  <!-- unit 111.1 -->
  <div id="unit111.1">q{%TMPL_VAR NAME=var1 eScApE=AvAl%}a</div>
  <div id="unit111.1_res"></div>

  <!-- unit 112 -->
  <div id="unit112">q{%TMPL_VAR NAME=var1 ESCAPE=NO%}a</div>
  <div id="unit112_res"></div>

  <!-- unit 112.1 -->
  <div id="unit112.1">q{%TMPL_VAR NAME=var1 EscApE=No%}a</div>
  <div id="unit112.1_res"></div>

  <!-- unit 113 -->
  <div id="unit113">q{%TMPL_VAR NAME=var1 ESCAPE=etexT%}a</div>
  <div id="unit113_res"></div>

  <!-- unit 113.1 -->
  <div id="unit113.1">q{%TMPL_VAR NAME=var1 ESCAPE=aVAL%}a</div>
  <div id="unit113.1_res"></div>

  <!-- unit 113.2 -->
  <div id="unit113.2">q{%TMPL_VAR NAME=var1 ESCAPE=no%}a</div>
  <div id="unit113.2_res"></div>

  <!-- unit 113.3 -->
  <div id="unit113.3">q{%TMPL_VAR NAME=var1 ESCAPE=2%}a</div>
  <div id="unit113.3_res"></div>

  <!-- unit 113.4 -->
  <div id="unit113.4">q{%TMPL_VAR NAME=var1 ESCAPE=2%}a</div>
  <div id="unit113.4_res"></div>

  </div>
</body>
</html>

